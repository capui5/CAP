sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/core/routing/History"],function(e,t,o){"use strict";return e.extend("empreg.controller.View5",{onInit:function(){this.oList=this.byId("employeelist")},getRouter:function(){return UIComponent.getRouterFor(this)},onNavBack:function(){var e=this.getOwnerComponent().getRouter();e.navTo("List")},onCreate:function(){var e=this;$.ajax({type:"GET",url:"./CatalogService/Employees?$orderby=ID desc&$top=1",dataType:"json",success:function(t){if(t&&t.value&&t.value.length>0){var o=t.value[0];var a=o.ID+1;var r=e.byId("country").getSelectedItem().getKey();var n={Netherlands:1,India:2,Singapore:3};var s=n[r];const l=e.byId("Phno");const u=l.getValue().replace(/,/g,"");const g=u?parseFloat(u.replace(/,/g,"")):null;if(isNaN(g)){sap.m.MessageBox.error("Invalid Phone Number. Please enter a valid number.");return}var i={ID:a,fname:e.byId("fname").getValue(),lname:e.byId("lname").getValue(),desig:e.byId("desig").getValue(),email:e.byId("email").getValue(),skills:e.byId("skills").getValue().toUpperCase(),country_ID:s,State:e.byId("idstate").getValue(),city:e.byId("idcity").getValue(),doj:e.byId("myDatePicker").getValue(),yoe:parseInt(e.byId("yoe").getValue()),reportingPerson:e.byId("reportingPerson").getValue(),Phno:g!==null?g.toString():null,gender:e.byId("genderRadioGroup").getSelectedButton().getText()};$.ajax({contentType:"application/json",type:"POST",url:"./CatalogService/Employees",dataType:"json",data:JSON.stringify(i),success:function(t){sap.m.MessageBox.success("Employee data saved successfully!",{onClose:function(){var t=sap.ui.core.UIComponent.getRouterFor(e);t.navTo("View1");window.location.reload();e.clearFormFields()}})},error:function(e){sap.m.MessageBox.error("Error while saving employee data")}})}else{sap.m.MessageBox.error("Error: No employee data found.")}},error:function(e){sap.m.MessageBox.error("Error fetching the highest employee ID")}})},onCancel:function(){var e=o.getInstance();var t=e.getPreviousHash();if(t!==undefined){window.history.go(-1)}else{var a=this.getOwnerComponent().getRouter();a.navTo("AllEmployees",{},true)}}})});