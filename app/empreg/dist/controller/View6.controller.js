sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/ui/core/UIComponent","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/MessageBox","sap/m/StandardListItem","sap/m/MessageToast"],function(e,t,o,i,s,n,r,a){"use strict";return e.extend("empreg.controller.View6",{onInit:function(){this.oList=this.byId("list");this.oDataModel=this.getOwnerComponent().getModel();this.getView().setModel(this.oDataModel);this.showEmployeesFromNetherlands();var e=this.getOwnerComponent().getRouter()},showEmployeesFromNetherlands:function(){var e=new i("country_ID",s.EQ,"1");this.oList.bindItems({path:"/Employees",filters:[e],template:new r({title:"{fname} {lname}",description:"{desig}",icon:"sap-icon://employee",iconDensityAware:false,iconInset:false,press:this.onListItemPressed.bind(this)})})},onListItemPressed:function(e){var t,o;t=e.getSource();o=t.getBindingContext();this.getRouter().navTo("View7",{employeeId:o.getProperty("ID")})},getRouter:function(){return o.getRouterFor(this)},onNavBack:function(){var e,o;e=t.getInstance();o=e.getPreviousHash();if(o!==undefined){window.history.go(-1)}else{this.getRouter().navTo("View1",{},true)}},onaddnewemployee:function(){var e=this.getOwnerComponent().getRouter();e.navTo("View5")},onFilter:function(e){var t=[];var o=e.getParameter("query");if(o){t.push(new i("ID",s.EQ,parseInt(o)))}var n=this.byId("table0");var r=n.getBinding("items");r.filter(t)},onEditMode:function(){this.byId("editModeButton").setVisible(false);this.byId("saveButton").setVisible(true);this.byId("deleteButton").setVisible(true)},onDelete:function(){var e=this.getView().byId("table0");var t=e.getSelectedItems()[0];if(!t){sap.m.MessageBox.error("Please select an employee to delete.");return}var o=t.getBindingContext().getObject();var i=o.ID;var s=this;n.confirm("Are you sure you want to delete this Employee record?",{title:"Confirm",onClose:function(t){if(t===sap.m.MessageBox.Action.OK){s.onDeleteSpecificRecord(e,o)}},actions:[sap.m.MessageBox.Action.OK,sap.m.MessageBox.Action.CANCEL],emphasizedAction:sap.m.MessageBox.Action.CANCEL,initialFocus:null,textDirection:sap.ui.core.TextDirection.Inherit})},onDeleteSpecificRecord:function(e,t){var o=t.ID;var i=this;$.ajax({url:"../../CatalogService/Employees/"+o,method:"DELETE",success:function(){var t=e.getModel("dataModel");var i=t.getProperty("/Employees");for(var s=0;s<i.length;s++){if(i[s].ID===o){i.splice(s,1);t.setProperty("/Employees",i)}n.success("Employee deleted successfully.")}},error:function(){n.error("Error deleting employee.")}})}})});